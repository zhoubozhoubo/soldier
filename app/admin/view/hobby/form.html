{extend name="../../admin/view/main"}

{block name='content'}
<form class="layui-form layui-card" action="{:request()->url()}" data-auto="true" method="post" autocomplete="off">
    <div class="layui-card-body padding-left-40">

        <div class="layui-row layui-col-space15">
            <div class="layui-col-xs1 text-center">
                <span class="color-green font-w7">图片</span>
                <span class="color-desc margin-left-5">Image</span>
                <input type="hidden" name="image" value="{$vo.image|default=''}">
                <script>$('[name=image]').uploadOneImage()</script>
            </div>
            <div class="layui-col-xs9 layui-col-lg-offset1">
                <label class="block relative">
                    <span class="color-green font-w7">标题</span>
                    <span class="color-desc margin-left-5">Title</span>
                    <input name="title" value='{$vo.title|default=""}' required pattern="^.{2,}$" placeholder="请输入标题" class="layui-input">
                </label>
            </div>
            <div class="layui-col-xs4 layui-col-lg-offset1">
                <label class="block relative">
                    <span class="color-green font-w7">时间</span>
                    <span class="color-desc margin-left-5">Time</span>
                    <input type="date" name="time" value='{$vo.time|default=""}' required placeholder="请输入时间" class="layui-input">
                </label>
            </div>
        </div>
        <div class="layui-row layui-col-space15">
            <div class="layui-col-xs12">
                <label class="block relative">
                    <span class="color-green font-w7">内容</span>
                    <span class="color-desc margin-left-5">Comment</span>
                    <textarea ng-model="$vo.comment" name='comment'>{$vo['comment']|default=''|htmlspecialchars_decode}</textarea>
                </label>
            </div>
        </div>
        <div class="hr-line-dashed"></div>
        {notempty name='vo.id'}<input type='hidden' value='{$vo.id}' name='id'>{/notempty}
        <div class="layui-form-item text-center">
            <button class="layui-btn" type='submit'>保存数据</button>
            <button class="layui-btn layui-btn-danger" type='button' data-history-back="确定要取消编辑吗？">取消编辑</button>
        </div>
    </div>
</form>
{/block}

{block name='script'}
<script>
    require(['angular', 'ckeditor'], function () {

        var editor;

        setTimeout(function () {
            if (editor) editor.destroy();
            editor = window.createEditor('[name="comment"]');
        }, 100);

    });
</script>
{/block}